apiVersion: v1
items:
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      kubectl.kubernetes.io/default-container: manager
    creationTimestamp: "2026-01-03T14:36:30Z"
    generateName: ceph-csi-controller-manager-6495fbd845-
    generation: 1
    labels:
      app.kubernetes.io/instance: rook-ceph-operator
      app.kubernetes.io/name: ceph-csi
      control-plane: ceph-csi-op-controller-manager
      pod-template-hash: 6495fbd845
    name: ceph-csi-controller-manager-6495fbd845-kss2t
    namespace: rook-ceph
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: ceph-csi-controller-manager-6495fbd845
      uid: 3ab0df25-8c03-494f-b4b0-ec7f7775c695
    resourceVersion: "220301616"
    uid: 682a85af-0ac6-4337-b4d0-def118332a66
  spec:
    containers:
    - args:
      - --leader-elect
      command:
      - /manager
      env:
      - name: OPERATOR_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: CSI_SERVICE_ACCOUNT_PREFIX
        value: ceph-csi-
      - name: WATCH_NAMESPACE
      - name: KUBERNETES_CLUSTER_DOMAIN
        value: cluster.local
      image: quay.io/cephcsi/ceph-csi-operator:v0.4.1
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 3
        httpGet:
          path: /healthz
          port: 8081
          scheme: HTTP
        initialDelaySeconds: 15
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      name: manager
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /readyz
          port: 8081
          scheme: HTTP
        initialDelaySeconds: 5
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          cpu: 500m
          memory: 128Mi
        requests:
          cpu: 10m
          memory: 64Mi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
        readOnlyRootFilesystem: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-j5dc2
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: alpha
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      runAsNonRoot: true
    serviceAccount: ceph-csi-controller-manager
    serviceAccountName: ceph-csi-controller-manager
    terminationGracePeriodSeconds: 10
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: kube-api-access-j5dc2
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:08Z"
      observedGeneration: 1
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:38:58Z"
      observedGeneration: 1
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:19Z"
      observedGeneration: 1
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:19Z"
      observedGeneration: 1
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:38:58Z"
      observedGeneration: 1
      status: "True"
      type: PodScheduled
    containerStatuses:
    - allocatedResources:
        cpu: 10m
        memory: 64Mi
      containerID: containerd://701d0bc100e9b1301326b8ba36456aa99685f78901612c4fd1c85b9e9879ded6
      image: quay.io/cephcsi/ceph-csi-operator:v0.4.1
      imageID: quay.io/cephcsi/ceph-csi-operator@sha256:97f6de12eb820b58b5d8caedcdfc9d0b15ccb1e198656f1b117dd5b0126f0c5b
      lastState: {}
      name: manager
      ready: true
      resources:
        limits:
          cpu: 500m
          memory: 128Mi
        requests:
          cpu: 10m
          memory: 64Mi
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2026-01-03T14:39:08Z"
      user:
        linux:
          gid: 65532
          supplementalGroups:
          - 65532
          uid: 65532
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-j5dc2
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 172.20.24.10
    hostIPs:
    - ip: 172.20.24.10
    observedGeneration: 1
    phase: Running
    podIP: 10.42.0.253
    podIPs:
    - ip: 10.42.0.253
    qosClass: Burstable
    startTime: "2026-01-03T14:38:58Z"
- apiVersion: v1
  kind: Pod
  metadata:
    creationTimestamp: "2026-01-03T14:36:29Z"
    generateName: rook-ceph-operator-59dbd96f7c-
    generation: 1
    labels:
      app: rook-ceph-operator
      helm.sh/chart: rook-ceph-v1.18.8
      pod-template-hash: 59dbd96f7c
    name: rook-ceph-operator-59dbd96f7c-rcgps
    namespace: rook-ceph
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: rook-ceph-operator-59dbd96f7c
      uid: 8b9d4e11-479a-4215-ae0b-9bdc4e5b0177
    resourceVersion: "220300941"
    uid: fafbe1cf-2b70-4ddf-94b8-dd2c940a63e4
  spec:
    containers:
    - args:
      - ceph
      - operator
      env:
      - name: ROOK_CURRENT_NAMESPACE_ONLY
        value: "false"
      - name: ROOK_HOSTPATH_REQUIRES_PRIVILEGED
        value: "false"
      - name: ROOK_DISABLE_DEVICE_HOTPLUG
        value: "false"
      - name: ROOK_DISCOVER_DEVICES_INTERVAL
        value: 60m
      - name: NODE_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: spec.nodeName
      - name: POD_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: POD_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      image: ghcr.io/rook/ceph:v1.18.8
      imagePullPolicy: IfNotPresent
      name: rook-ceph-operator
      resources:
        limits:
          memory: 512Mi
        requests:
          cpu: 100m
          memory: 128Mi
      securityContext:
        capabilities:
          drop:
          - ALL
        runAsGroup: 2016
        runAsNonRoot: true
        runAsUser: 2016
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/lib/rook
        name: rook-config
      - mountPath: /etc/ceph
        name: default-config-dir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-494xj
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: alpha
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: rook-ceph-system
    serviceAccountName: rook-ceph-system
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 5
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - emptyDir: {}
      name: rook-config
    - emptyDir: {}
      name: default-config-dir
    - name: kube-api-access-494xj
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:08Z"
      observedGeneration: 1
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:38:58Z"
      observedGeneration: 1
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:08Z"
      observedGeneration: 1
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:08Z"
      observedGeneration: 1
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:38:58Z"
      observedGeneration: 1
      status: "True"
      type: PodScheduled
    containerStatuses:
    - allocatedResources:
        cpu: 100m
        memory: 128Mi
      containerID: containerd://5a6822599d23a8f428600e4362fdfc0986fcac94e8f0bdd44197426bd154b951
      image: ghcr.io/rook/ceph:v1.18.8
      imageID: ghcr.io/rook/ceph@sha256:aa00c21f794c814cdfc94c7d3f3efb1bb1cd9fffc4f7240a43fb45c1f90b8b7c
      lastState: {}
      name: rook-ceph-operator
      ready: true
      resources:
        limits:
          memory: 512Mi
        requests:
          cpu: 100m
          memory: 128Mi
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2026-01-03T14:39:07Z"
      user:
        linux:
          gid: 2016
          supplementalGroups:
          - 2016
          uid: 2016
      volumeMounts:
      - mountPath: /var/lib/rook
        name: rook-config
      - mountPath: /etc/ceph
        name: default-config-dir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-494xj
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 172.20.24.10
    hostIPs:
    - ip: 172.20.24.10
    observedGeneration: 1
    phase: Running
    podIP: 10.42.0.177
    podIPs:
    - ip: 10.42.0.177
    qosClass: Burstable
    startTime: "2026-01-03T14:38:58Z"
- apiVersion: v1
  kind: Pod
  metadata:
    creationTimestamp: "2026-01-03T14:14:37Z"
    generateName: rook-ceph-tools-cd8775d9-
    generation: 1
    labels:
      app: rook-ceph-tools
      pod-template-hash: cd8775d9
    name: rook-ceph-tools-cd8775d9-mjw5j
    namespace: rook-ceph
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: rook-ceph-tools-cd8775d9
      uid: c713f567-71ae-4a75-a633-60664a3f9d86
    resourceVersion: "220299709"
    uid: 3165e585-bb1b-43af-bb2a-40e02646707a
  spec:
    containers:
    - command:
      - /bin/bash
      - -c
      - |
        # Replicate the script from toolbox.sh inline so the ceph image
        # can be run directly, instead of requiring the rook toolbox
        CEPH_CONFIG="/etc/ceph/ceph.conf"
        MON_CONFIG="/etc/rook/mon-endpoints"
        KEYRING_FILE="/etc/ceph/keyring"

        # create a ceph config file in its default location so ceph/rados tools can be used
        # without specifying any arguments
        write_endpoints() {
          endpoints=$(cat ${MON_CONFIG})

          # filter out the mon names
          # external cluster can have numbers or hyphens in mon names, handling them in regex
          # shellcheck disable=SC2001
          mon_endpoints=$(echo "${endpoints}"| sed 's/[a-z0-9_-]\+=//g')

          DATE=$(date)
          echo "$DATE writing mon endpoints to ${CEPH_CONFIG}: ${endpoints}"
            cat <<EOF > ${CEPH_CONFIG}
        [global]
        mon_host = ${mon_endpoints}

        [client.admin]
        keyring = ${KEYRING_FILE}
        EOF
        }

        # watch the endpoints config file and update if the mon endpoints ever change
        watch_endpoints() {
          # get the timestamp for the target of the soft link
          real_path=$(realpath ${MON_CONFIG})
          initial_time=$(stat -c %Z "${real_path}")
          while true; do
            real_path=$(realpath ${MON_CONFIG})
            latest_time=$(stat -c %Z "${real_path}")

            if [[ "${latest_time}" != "${initial_time}" ]]; then
              write_endpoints
              initial_time=${latest_time}
            fi

            sleep 10
          done
        }

        # read the secret from an env var (for backward compatibility), or from the secret file
        ceph_secret=${ROOK_CEPH_SECRET}
        if [[ "$ceph_secret" == "" ]]; then
          ceph_secret=$(cat /var/lib/rook-ceph-mon/secret.keyring)
        fi

        # create the keyring file
        cat <<EOF > ${KEYRING_FILE}
        [${ROOK_CEPH_USERNAME}]
        key = ${ceph_secret}
        EOF

        # write the initial config file
        write_endpoints

        # continuously update the mon endpoints if they fail over
        watch_endpoints
      env:
      - name: ROOK_CEPH_USERNAME
        valueFrom:
          secretKeyRef:
            key: ceph-username
            name: rook-ceph-mon
      image: quay.io/ceph/ceph:v19.2.3
      imagePullPolicy: IfNotPresent
      name: rook-ceph-tools
      resources:
        limits:
          memory: 1Gi
        requests:
          cpu: 100m
          memory: 128Mi
      securityContext:
        capabilities:
          drop:
          - ALL
        runAsGroup: 2016
        runAsNonRoot: true
        runAsUser: 2016
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      tty: true
      volumeMounts:
      - mountPath: /etc/ceph
        name: ceph-config
      - mountPath: /etc/rook
        name: mon-endpoint-volume
      - mountPath: /var/lib/rook-ceph-mon
        name: ceph-admin-secret
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-kkb88
        readOnly: true
    dnsPolicy: ClusterFirstWithHostNet
    enableServiceLinks: true
    hostNetwork: true
    nodeName: alpha
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: rook-ceph-default
    serviceAccountName: rook-ceph-default
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 5
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: ceph-admin-secret
      secret:
        defaultMode: 420
        items:
        - key: ceph-secret
          path: secret.keyring
        optional: false
        secretName: rook-ceph-mon
    - configMap:
        defaultMode: 420
        items:
        - key: data
          path: mon-endpoints
        name: rook-ceph-mon-endpoints
      name: mon-endpoint-volume
    - emptyDir: {}
      name: ceph-config
    - name: kube-api-access-kkb88
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:38:34Z"
      observedGeneration: 1
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:14:37Z"
      observedGeneration: 1
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:38:34Z"
      observedGeneration: 1
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:38:34Z"
      observedGeneration: 1
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:14:37Z"
      observedGeneration: 1
      status: "True"
      type: PodScheduled
    containerStatuses:
    - allocatedResources:
        cpu: 100m
        memory: 128Mi
      containerID: containerd://cb9853e67bbff9cb179df9fd98f5877996061672d1832b8847cc81e3441c67d8
      image: quay.io/ceph/ceph:v19.2.3
      imageID: quay.io/ceph/ceph@sha256:af0c5903e901e329adabe219dfc8d0c3efc1f05102a753902f33ee16c26b6cee
      lastState:
        terminated:
          containerID: containerd://fb0b539891dc604cf230746fff4cc412b5ee5badf71a651b1f512d011fb796dd
          exitCode: 137
          finishedAt: "2026-01-03T14:36:37Z"
          reason: Error
          startedAt: "2026-01-03T14:14:37Z"
      name: rook-ceph-tools
      ready: true
      resources:
        limits:
          memory: 1Gi
        requests:
          cpu: 100m
          memory: 128Mi
      restartCount: 1
      started: true
      state:
        running:
          startedAt: "2026-01-03T14:38:34Z"
      user:
        linux:
          gid: 2016
          supplementalGroups:
          - 2016
          uid: 2016
      volumeMounts:
      - mountPath: /etc/ceph
        name: ceph-config
      - mountPath: /etc/rook
        name: mon-endpoint-volume
      - mountPath: /var/lib/rook-ceph-mon
        name: ceph-admin-secret
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-kkb88
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 172.20.24.10
    hostIPs:
    - ip: 172.20.24.10
    observedGeneration: 1
    phase: Running
    podIP: 172.20.24.10
    podIPs:
    - ip: 172.20.24.10
    qosClass: Burstable
    startTime: "2026-01-03T14:14:37Z"
- apiVersion: v1
  kind: Pod
  metadata:
    creationTimestamp: "2026-01-03T14:39:19Z"
    generateName: rook-discover-
    generation: 1
    labels:
      app: rook-discover
      app.kubernetes.io/component: rook-discover
      app.kubernetes.io/created-by: rook-ceph-operator
      app.kubernetes.io/instance: rook-discover
      app.kubernetes.io/managed-by: rook-ceph-operator
      app.kubernetes.io/name: rook-discover
      app.kubernetes.io/part-of: rook-ceph-operator
      controller-revision-hash: 795d7956fc
      pod-template-generation: "1"
      rook.io/operator-namespace: rook-ceph
    name: rook-discover-mpct5
    namespace: rook-ceph
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: rook-discover
      uid: ed3b3e36-767a-4f91-bd5d-eb07e922f052
    resourceVersion: "220302365"
    uid: 048bf057-c67f-466d-ba6e-eb208192842b
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - bravo
    containers:
    - args:
      - discover
      - --discover-interval
      - 60m
      - --use-ceph-volume
      env:
      - name: POD_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: NODE_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: spec.nodeName
      - name: POD_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: DISCOVER_DAEMON_UDEV_BLACKLIST
      image: ghcr.io/rook/ceph:v1.18.8
      imagePullPolicy: IfNotPresent
      name: rook-discover
      resources: {}
      securityContext:
        capabilities:
          drop:
          - NET_RAW
        privileged: true
        runAsUser: 0
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /dev
        name: dev
      - mountPath: /sys
        name: sys
        readOnly: true
      - mountPath: /run/udev
        name: udev
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-nrqjz
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: bravo
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: rook-ceph-system
    serviceAccountName: rook-ceph-system
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    volumes:
    - hostPath:
        path: /dev
        type: ""
      name: dev
    - hostPath:
        path: /sys
        type: ""
      name: sys
    - hostPath:
        path: /run/udev
        type: ""
      name: udev
    - name: kube-api-access-nrqjz
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:31Z"
      observedGeneration: 1
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:20Z"
      observedGeneration: 1
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:31Z"
      observedGeneration: 1
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:31Z"
      observedGeneration: 1
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:19Z"
      observedGeneration: 1
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://5ca9597a828c234186ff7535279a2127d3b485616161ca62f932628f91b82af1
      image: ghcr.io/rook/ceph:v1.18.8
      imageID: ghcr.io/rook/ceph@sha256:aa00c21f794c814cdfc94c7d3f3efb1bb1cd9fffc4f7240a43fb45c1f90b8b7c
      lastState: {}
      name: rook-discover
      ready: true
      resources: {}
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2026-01-03T14:39:30Z"
      user:
        linux:
          gid: 0
          supplementalGroups:
          - 0
          uid: 0
      volumeMounts:
      - mountPath: /dev
        name: dev
      - mountPath: /sys
        name: sys
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /run/udev
        name: udev
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-nrqjz
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 172.20.24.11
    hostIPs:
    - ip: 172.20.24.11
    observedGeneration: 1
    phase: Running
    podIP: 10.42.2.94
    podIPs:
    - ip: 10.42.2.94
    qosClass: BestEffort
    startTime: "2026-01-03T14:39:20Z"
- apiVersion: v1
  kind: Pod
  metadata:
    creationTimestamp: "2026-01-03T14:38:59Z"
    generateName: rook-discover-
    generation: 1
    labels:
      app: rook-discover
      app.kubernetes.io/component: rook-discover
      app.kubernetes.io/created-by: rook-ceph-operator
      app.kubernetes.io/instance: rook-discover
      app.kubernetes.io/managed-by: rook-ceph-operator
      app.kubernetes.io/name: rook-discover
      app.kubernetes.io/part-of: rook-ceph-operator
      controller-revision-hash: 795d7956fc
      pod-template-generation: "1"
      rook.io/operator-namespace: rook-ceph
    name: rook-discover-nqx27
    namespace: rook-ceph
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: rook-discover
      uid: ed3b3e36-767a-4f91-bd5d-eb07e922f052
    resourceVersion: "220301389"
    uid: 28f58bc6-b451-4b9b-b4b9-d03f18618b56
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - alpha
    containers:
    - args:
      - discover
      - --discover-interval
      - 60m
      - --use-ceph-volume
      env:
      - name: POD_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: NODE_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: spec.nodeName
      - name: POD_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: DISCOVER_DAEMON_UDEV_BLACKLIST
      image: ghcr.io/rook/ceph:v1.18.8
      imagePullPolicy: IfNotPresent
      name: rook-discover
      resources: {}
      securityContext:
        capabilities:
          drop:
          - NET_RAW
        privileged: true
        runAsUser: 0
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /dev
        name: dev
      - mountPath: /sys
        name: sys
        readOnly: true
      - mountPath: /run/udev
        name: udev
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-hhdlw
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: alpha
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: rook-ceph-system
    serviceAccountName: rook-ceph-system
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    volumes:
    - hostPath:
        path: /dev
        type: ""
      name: dev
    - hostPath:
        path: /sys
        type: ""
      name: sys
    - hostPath:
        path: /run/udev
        type: ""
      name: udev
    - name: kube-api-access-hhdlw
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:12Z"
      observedGeneration: 1
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:38:59Z"
      observedGeneration: 1
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:12Z"
      observedGeneration: 1
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:12Z"
      observedGeneration: 1
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:38:59Z"
      observedGeneration: 1
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://958d4f87b2787ded2c1790cae36d595e98bb854809f3ec66b825736e81080616
      image: ghcr.io/rook/ceph:v1.18.8
      imageID: ghcr.io/rook/ceph@sha256:aa00c21f794c814cdfc94c7d3f3efb1bb1cd9fffc4f7240a43fb45c1f90b8b7c
      lastState: {}
      name: rook-discover
      ready: true
      resources: {}
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2026-01-03T14:39:11Z"
      user:
        linux:
          gid: 0
          supplementalGroups:
          - 0
          uid: 0
      volumeMounts:
      - mountPath: /dev
        name: dev
      - mountPath: /sys
        name: sys
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /run/udev
        name: udev
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-hhdlw
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 172.20.24.10
    hostIPs:
    - ip: 172.20.24.10
    observedGeneration: 1
    phase: Running
    podIP: 10.42.0.219
    podIPs:
    - ip: 10.42.0.219
    qosClass: BestEffort
    startTime: "2026-01-03T14:38:59Z"
- apiVersion: v1
  kind: Pod
  metadata:
    creationTimestamp: "2026-01-03T14:39:10Z"
    generateName: rook-discover-
    generation: 1
    labels:
      app: rook-discover
      app.kubernetes.io/component: rook-discover
      app.kubernetes.io/created-by: rook-ceph-operator
      app.kubernetes.io/instance: rook-discover
      app.kubernetes.io/managed-by: rook-ceph-operator
      app.kubernetes.io/name: rook-discover
      app.kubernetes.io/part-of: rook-ceph-operator
      controller-revision-hash: 795d7956fc
      pod-template-generation: "1"
      rook.io/operator-namespace: rook-ceph
    name: rook-discover-wh5cz
    namespace: rook-ceph
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: rook-discover
      uid: ed3b3e36-767a-4f91-bd5d-eb07e922f052
    resourceVersion: "220301395"
    uid: 2067092f-d43c-4abc-8641-5fbce08e20a4
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - charlie
    containers:
    - args:
      - discover
      - --discover-interval
      - 60m
      - --use-ceph-volume
      env:
      - name: POD_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: NODE_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: spec.nodeName
      - name: POD_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: DISCOVER_DAEMON_UDEV_BLACKLIST
      image: ghcr.io/rook/ceph:v1.18.8
      imagePullPolicy: IfNotPresent
      name: rook-discover
      resources: {}
      securityContext:
        capabilities:
          drop:
          - NET_RAW
        privileged: true
        runAsUser: 0
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /dev
        name: dev
      - mountPath: /sys
        name: sys
        readOnly: true
      - mountPath: /run/udev
        name: udev
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-52x99
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: charlie
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: rook-ceph-system
    serviceAccountName: rook-ceph-system
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    volumes:
    - hostPath:
        path: /dev
        type: ""
      name: dev
    - hostPath:
        path: /sys
        type: ""
      name: sys
    - hostPath:
        path: /run/udev
        type: ""
      name: udev
    - name: kube-api-access-52x99
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:12Z"
      observedGeneration: 1
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:10Z"
      observedGeneration: 1
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:12Z"
      observedGeneration: 1
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:12Z"
      observedGeneration: 1
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2026-01-03T14:39:10Z"
      observedGeneration: 1
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://51a540a232897c37614388b74fdf01808b9b0e82235959c5654c91505084232c
      image: ghcr.io/rook/ceph:v1.18.8
      imageID: ghcr.io/rook/ceph@sha256:aa00c21f794c814cdfc94c7d3f3efb1bb1cd9fffc4f7240a43fb45c1f90b8b7c
      lastState: {}
      name: rook-discover
      ready: true
      resources: {}
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2026-01-03T14:39:12Z"
      user:
        linux:
          gid: 0
          supplementalGroups:
          - 0
          uid: 0
      volumeMounts:
      - mountPath: /dev
        name: dev
      - mountPath: /sys
        name: sys
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /run/udev
        name: udev
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-52x99
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 172.20.24.12
    hostIPs:
    - ip: 172.20.24.12
    observedGeneration: 1
    phase: Running
    podIP: 10.42.1.239
    podIPs:
    - ip: 10.42.1.239
    qosClass: BestEffort
    startTime: "2026-01-03T14:39:10Z"
- apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    annotations:
      deprecated.daemonset.template.generation: "1"
    creationTimestamp: "2026-01-03T14:12:37Z"
    generation: 1
    labels:
      app: rook-discover
      app.kubernetes.io/component: rook-discover
      app.kubernetes.io/created-by: rook-ceph-operator
      app.kubernetes.io/instance: rook-discover
      app.kubernetes.io/managed-by: rook-ceph-operator
      app.kubernetes.io/name: rook-discover
      app.kubernetes.io/part-of: rook-ceph-operator
      rook.io/operator-namespace: rook-ceph
    name: rook-discover
    namespace: rook-ceph
    ownerReferences:
    - apiVersion: apps/v1
      kind: ReplicaSet
      name: rook-ceph-operator-59dbd96f7c
      uid: 8b9d4e11-479a-4215-ae0b-9bdc4e5b0177
    resourceVersion: "220302409"
    uid: ed3b3e36-767a-4f91-bd5d-eb07e922f052
  spec:
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: rook-discover
    template:
      metadata:
        labels:
          app: rook-discover
          app.kubernetes.io/component: rook-discover
          app.kubernetes.io/created-by: rook-ceph-operator
          app.kubernetes.io/instance: rook-discover
          app.kubernetes.io/managed-by: rook-ceph-operator
          app.kubernetes.io/name: rook-discover
          app.kubernetes.io/part-of: rook-ceph-operator
          rook.io/operator-namespace: rook-ceph
      spec:
        containers:
        - args:
          - discover
          - --discover-interval
          - 60m
          - --use-ceph-volume
          env:
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: POD_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: DISCOVER_DAEMON_UDEV_BLACKLIST
          image: ghcr.io/rook/ceph:v1.18.8
          imagePullPolicy: IfNotPresent
          name: rook-discover
          resources: {}
          securityContext:
            capabilities:
              drop:
              - NET_RAW
            privileged: true
            runAsUser: 0
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /dev
            name: dev
          - mountPath: /sys
            name: sys
            readOnly: true
          - mountPath: /run/udev
            name: udev
            readOnly: true
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: rook-ceph-system
        serviceAccountName: rook-ceph-system
        terminationGracePeriodSeconds: 30
        volumes:
        - hostPath:
            path: /dev
            type: ""
          name: dev
        - hostPath:
            path: /sys
            type: ""
          name: sys
        - hostPath:
            path: /run/udev
            type: ""
          name: udev
    updateStrategy:
      rollingUpdate:
        maxSurge: 0
        maxUnavailable: 1
      type: RollingUpdate
  status:
    currentNumberScheduled: 3
    desiredNumberScheduled: 3
    numberAvailable: 3
    numberMisscheduled: 0
    numberReady: 3
    observedGeneration: 1
    updatedNumberScheduled: 3
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      meta.helm.sh/release-name: rook-ceph-operator
      meta.helm.sh/release-namespace: rook-ceph
    creationTimestamp: "2026-01-03T14:12:36Z"
    generation: 1
    labels:
      app.kubernetes.io/instance: rook-ceph-operator
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: ceph-csi
      app.kubernetes.io/version: v0.4.1
      control-plane: controller-manager
      helm.sh/chart: ceph-csi-operator-0.4.1
      helm.toolkit.fluxcd.io/name: rook-ceph-operator
      helm.toolkit.fluxcd.io/namespace: rook-ceph
    name: ceph-csi-controller-manager
    namespace: rook-ceph
    resourceVersion: "220301619"
    uid: f9ac98f7-0332-4368-8110-1a1758d4deaa
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app.kubernetes.io/instance: rook-ceph-operator
        app.kubernetes.io/name: ceph-csi
        control-plane: ceph-csi-op-controller-manager
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          kubectl.kubernetes.io/default-container: manager
        labels:
          app.kubernetes.io/instance: rook-ceph-operator
          app.kubernetes.io/name: ceph-csi
          control-plane: ceph-csi-op-controller-manager
      spec:
        containers:
        - args:
          - --leader-elect
          command:
          - /manager
          env:
          - name: OPERATOR_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: CSI_SERVICE_ACCOUNT_PREFIX
            value: ceph-csi-
          - name: WATCH_NAMESPACE
          - name: KUBERNETES_CLUSTER_DOMAIN
            value: cluster.local
          image: quay.io/cephcsi/ceph-csi-operator:v0.4.1
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: 8081
              scheme: HTTP
            initialDelaySeconds: 15
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: manager
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /readyz
              port: 8081
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 500m
              memory: 128Mi
            requests:
              cpu: 10m
              memory: 64Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          runAsNonRoot: true
        serviceAccount: ceph-csi-controller-manager
        serviceAccountName: ceph-csi-controller-manager
        terminationGracePeriodSeconds: 10
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2026-01-03T14:12:36Z"
      lastUpdateTime: "2026-01-03T14:12:48Z"
      message: ReplicaSet "ceph-csi-controller-manager-6495fbd845" has successfully
        progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2026-01-03T14:39:19Z"
      lastUpdateTime: "2026-01-03T14:39:19Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    terminatingReplicas: 0
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      meta.helm.sh/release-name: rook-ceph-operator
      meta.helm.sh/release-namespace: rook-ceph
    creationTimestamp: "2026-01-03T14:12:36Z"
    generation: 1
    labels:
      app.kubernetes.io/created-by: helm
      app.kubernetes.io/instance: rook-ceph-operator
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: rook-ceph
      app.kubernetes.io/part-of: rook-ceph-operator
      app.kubernetes.io/version: v1.18.8
      helm.sh/chart: rook-ceph-v1.18.8
      helm.toolkit.fluxcd.io/name: rook-ceph-operator
      helm.toolkit.fluxcd.io/namespace: rook-ceph
      operator: rook
      storage-backend: ceph
    name: rook-ceph-operator
    namespace: rook-ceph
    resourceVersion: "220300944"
    uid: ba777951-78f3-41fb-9fec-e3adf4f8a642
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: rook-ceph-operator
    strategy:
      type: Recreate
    template:
      metadata:
        labels:
          app: rook-ceph-operator
          helm.sh/chart: rook-ceph-v1.18.8
      spec:
        containers:
        - args:
          - ceph
          - operator
          env:
          - name: ROOK_CURRENT_NAMESPACE_ONLY
            value: "false"
          - name: ROOK_HOSTPATH_REQUIRES_PRIVILEGED
            value: "false"
          - name: ROOK_DISABLE_DEVICE_HOTPLUG
            value: "false"
          - name: ROOK_DISCOVER_DEVICES_INTERVAL
            value: 60m
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: POD_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: ghcr.io/rook/ceph:v1.18.8
          imagePullPolicy: IfNotPresent
          name: rook-ceph-operator
          resources:
            limits:
              memory: 512Mi
            requests:
              cpu: 100m
              memory: 128Mi
          securityContext:
            capabilities:
              drop:
              - ALL
            runAsGroup: 2016
            runAsNonRoot: true
            runAsUser: 2016
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/rook
            name: rook-config
          - mountPath: /etc/ceph
            name: default-config-dir
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: rook-ceph-system
        serviceAccountName: rook-ceph-system
        terminationGracePeriodSeconds: 30
        tolerations:
        - effect: NoExecute
          key: node.kubernetes.io/unreachable
          operator: Exists
          tolerationSeconds: 5
        volumes:
        - emptyDir: {}
          name: rook-config
        - emptyDir: {}
          name: default-config-dir
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2026-01-03T14:12:36Z"
      lastUpdateTime: "2026-01-03T14:12:37Z"
      message: ReplicaSet "rook-ceph-operator-59dbd96f7c" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2026-01-03T14:39:08Z"
      lastUpdateTime: "2026-01-03T14:39:08Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    terminatingReplicas: 0
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      meta.helm.sh/release-name: rook-ceph-cluster
      meta.helm.sh/release-namespace: rook-ceph
    creationTimestamp: "2026-01-03T14:14:36Z"
    generation: 1
    labels:
      app: rook-ceph-tools
      app.kubernetes.io/managed-by: Helm
      helm.toolkit.fluxcd.io/name: rook-ceph-cluster
      helm.toolkit.fluxcd.io/namespace: rook-ceph
    name: rook-ceph-tools
    namespace: rook-ceph
    resourceVersion: "220282079"
    uid: 3aeba737-8e65-4de6-9fb1-2ad9fcdf2812
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: rook-ceph-tools
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        labels:
          app: rook-ceph-tools
      spec:
        containers:
        - command:
          - /bin/bash
          - -c
          - |
            # Replicate the script from toolbox.sh inline so the ceph image
            # can be run directly, instead of requiring the rook toolbox
            CEPH_CONFIG="/etc/ceph/ceph.conf"
            MON_CONFIG="/etc/rook/mon-endpoints"
            KEYRING_FILE="/etc/ceph/keyring"

            # create a ceph config file in its default location so ceph/rados tools can be used
            # without specifying any arguments
            write_endpoints() {
              endpoints=$(cat ${MON_CONFIG})

              # filter out the mon names
              # external cluster can have numbers or hyphens in mon names, handling them in regex
              # shellcheck disable=SC2001
              mon_endpoints=$(echo "${endpoints}"| sed 's/[a-z0-9_-]\+=//g')

              DATE=$(date)
              echo "$DATE writing mon endpoints to ${CEPH_CONFIG}: ${endpoints}"
                cat <<EOF > ${CEPH_CONFIG}
            [global]
            mon_host = ${mon_endpoints}

            [client.admin]
            keyring = ${KEYRING_FILE}
            EOF
            }

            # watch the endpoints config file and update if the mon endpoints ever change
            watch_endpoints() {
              # get the timestamp for the target of the soft link
              real_path=$(realpath ${MON_CONFIG})
              initial_time=$(stat -c %Z "${real_path}")
              while true; do
                real_path=$(realpath ${MON_CONFIG})
                latest_time=$(stat -c %Z "${real_path}")

                if [[ "${latest_time}" != "${initial_time}" ]]; then
                  write_endpoints
                  initial_time=${latest_time}
                fi

                sleep 10
              done
            }

            # read the secret from an env var (for backward compatibility), or from the secret file
            ceph_secret=${ROOK_CEPH_SECRET}
            if [[ "$ceph_secret" == "" ]]; then
              ceph_secret=$(cat /var/lib/rook-ceph-mon/secret.keyring)
            fi

            # create the keyring file
            cat <<EOF > ${KEYRING_FILE}
            [${ROOK_CEPH_USERNAME}]
            key = ${ceph_secret}
            EOF

            # write the initial config file
            write_endpoints

            # continuously update the mon endpoints if they fail over
            watch_endpoints
          env:
          - name: ROOK_CEPH_USERNAME
            valueFrom:
              secretKeyRef:
                key: ceph-username
                name: rook-ceph-mon
          image: quay.io/ceph/ceph:v19.2.3
          imagePullPolicy: IfNotPresent
          name: rook-ceph-tools
          resources:
            limits:
              memory: 1Gi
            requests:
              cpu: 100m
              memory: 128Mi
          securityContext:
            capabilities:
              drop:
              - ALL
            runAsGroup: 2016
            runAsNonRoot: true
            runAsUser: 2016
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          tty: true
          volumeMounts:
          - mountPath: /etc/ceph
            name: ceph-config
          - mountPath: /etc/rook
            name: mon-endpoint-volume
          - mountPath: /var/lib/rook-ceph-mon
            name: ceph-admin-secret
        dnsPolicy: ClusterFirstWithHostNet
        hostNetwork: true
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: rook-ceph-default
        serviceAccountName: rook-ceph-default
        terminationGracePeriodSeconds: 30
        tolerations:
        - effect: NoExecute
          key: node.kubernetes.io/unreachable
          operator: Exists
          tolerationSeconds: 5
        volumes:
        - name: ceph-admin-secret
          secret:
            defaultMode: 420
            items:
            - key: ceph-secret
              path: secret.keyring
            optional: false
            secretName: rook-ceph-mon
        - configMap:
            defaultMode: 420
            items:
            - key: data
              path: mon-endpoints
            name: rook-ceph-mon-endpoints
          name: mon-endpoint-volume
        - emptyDir: {}
          name: ceph-config
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2026-01-03T14:14:38Z"
      lastUpdateTime: "2026-01-03T14:14:38Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2026-01-03T14:14:36Z"
      lastUpdateTime: "2026-01-03T14:14:38Z"
      message: ReplicaSet "rook-ceph-tools-cd8775d9" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    terminatingReplicas: 0
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
      meta.helm.sh/release-name: rook-ceph-operator
      meta.helm.sh/release-namespace: rook-ceph
    creationTimestamp: "2026-01-03T14:12:36Z"
    generation: 1
    labels:
      app.kubernetes.io/instance: rook-ceph-operator
      app.kubernetes.io/name: ceph-csi
      control-plane: ceph-csi-op-controller-manager
      pod-template-hash: 6495fbd845
    name: ceph-csi-controller-manager-6495fbd845
    namespace: rook-ceph
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: ceph-csi-controller-manager
      uid: f9ac98f7-0332-4368-8110-1a1758d4deaa
    resourceVersion: "220301617"
    uid: 3ab0df25-8c03-494f-b4b0-ec7f7775c695
  spec:
    replicas: 1
    selector:
      matchLabels:
        app.kubernetes.io/instance: rook-ceph-operator
        app.kubernetes.io/name: ceph-csi
        control-plane: ceph-csi-op-controller-manager
        pod-template-hash: 6495fbd845
    template:
      metadata:
        annotations:
          kubectl.kubernetes.io/default-container: manager
        labels:
          app.kubernetes.io/instance: rook-ceph-operator
          app.kubernetes.io/name: ceph-csi
          control-plane: ceph-csi-op-controller-manager
          pod-template-hash: 6495fbd845
      spec:
        containers:
        - args:
          - --leader-elect
          command:
          - /manager
          env:
          - name: OPERATOR_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: CSI_SERVICE_ACCOUNT_PREFIX
            value: ceph-csi-
          - name: WATCH_NAMESPACE
          - name: KUBERNETES_CLUSTER_DOMAIN
            value: cluster.local
          image: quay.io/cephcsi/ceph-csi-operator:v0.4.1
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: 8081
              scheme: HTTP
            initialDelaySeconds: 15
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: manager
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /readyz
              port: 8081
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 500m
              memory: 128Mi
            requests:
              cpu: 10m
              memory: 64Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          runAsNonRoot: true
        serviceAccount: ceph-csi-controller-manager
        serviceAccountName: ceph-csi-controller-manager
        terminationGracePeriodSeconds: 10
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    terminatingReplicas: 0
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "1"
      deployment.kubernetes.io/revision: "1"
      meta.helm.sh/release-name: rook-ceph-operator
      meta.helm.sh/release-namespace: rook-ceph
    creationTimestamp: "2026-01-03T14:12:36Z"
    generation: 1
    labels:
      app: rook-ceph-operator
      helm.sh/chart: rook-ceph-v1.18.8
      pod-template-hash: 59dbd96f7c
    name: rook-ceph-operator-59dbd96f7c
    namespace: rook-ceph
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: rook-ceph-operator
      uid: ba777951-78f3-41fb-9fec-e3adf4f8a642
    resourceVersion: "220300942"
    uid: 8b9d4e11-479a-4215-ae0b-9bdc4e5b0177
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: rook-ceph-operator
        pod-template-hash: 59dbd96f7c
    template:
      metadata:
        labels:
          app: rook-ceph-operator
          helm.sh/chart: rook-ceph-v1.18.8
          pod-template-hash: 59dbd96f7c
      spec:
        containers:
        - args:
          - ceph
          - operator
          env:
          - name: ROOK_CURRENT_NAMESPACE_ONLY
            value: "false"
          - name: ROOK_HOSTPATH_REQUIRES_PRIVILEGED
            value: "false"
          - name: ROOK_DISABLE_DEVICE_HOTPLUG
            value: "false"
          - name: ROOK_DISCOVER_DEVICES_INTERVAL
            value: 60m
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: POD_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: ghcr.io/rook/ceph:v1.18.8
          imagePullPolicy: IfNotPresent
          name: rook-ceph-operator
          resources:
            limits:
              memory: 512Mi
            requests:
              cpu: 100m
              memory: 128Mi
          securityContext:
            capabilities:
              drop:
              - ALL
            runAsGroup: 2016
            runAsNonRoot: true
            runAsUser: 2016
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/rook
            name: rook-config
          - mountPath: /etc/ceph
            name: default-config-dir
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: rook-ceph-system
        serviceAccountName: rook-ceph-system
        terminationGracePeriodSeconds: 30
        tolerations:
        - effect: NoExecute
          key: node.kubernetes.io/unreachable
          operator: Exists
          tolerationSeconds: 5
        volumes:
        - emptyDir: {}
          name: rook-config
        - emptyDir: {}
          name: default-config-dir
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    terminatingReplicas: 0
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
      meta.helm.sh/release-name: rook-ceph-cluster
      meta.helm.sh/release-namespace: rook-ceph
    creationTimestamp: "2026-01-03T14:14:36Z"
    generation: 1
    labels:
      app: rook-ceph-tools
      pod-template-hash: cd8775d9
    name: rook-ceph-tools-cd8775d9
    namespace: rook-ceph
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: rook-ceph-tools
      uid: 3aeba737-8e65-4de6-9fb1-2ad9fcdf2812
    resourceVersion: "220282078"
    uid: c713f567-71ae-4a75-a633-60664a3f9d86
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: rook-ceph-tools
        pod-template-hash: cd8775d9
    template:
      metadata:
        labels:
          app: rook-ceph-tools
          pod-template-hash: cd8775d9
      spec:
        containers:
        - command:
          - /bin/bash
          - -c
          - |
            # Replicate the script from toolbox.sh inline so the ceph image
            # can be run directly, instead of requiring the rook toolbox
            CEPH_CONFIG="/etc/ceph/ceph.conf"
            MON_CONFIG="/etc/rook/mon-endpoints"
            KEYRING_FILE="/etc/ceph/keyring"

            # create a ceph config file in its default location so ceph/rados tools can be used
            # without specifying any arguments
            write_endpoints() {
              endpoints=$(cat ${MON_CONFIG})

              # filter out the mon names
              # external cluster can have numbers or hyphens in mon names, handling them in regex
              # shellcheck disable=SC2001
              mon_endpoints=$(echo "${endpoints}"| sed 's/[a-z0-9_-]\+=//g')

              DATE=$(date)
              echo "$DATE writing mon endpoints to ${CEPH_CONFIG}: ${endpoints}"
                cat <<EOF > ${CEPH_CONFIG}
            [global]
            mon_host = ${mon_endpoints}

            [client.admin]
            keyring = ${KEYRING_FILE}
            EOF
            }

            # watch the endpoints config file and update if the mon endpoints ever change
            watch_endpoints() {
              # get the timestamp for the target of the soft link
              real_path=$(realpath ${MON_CONFIG})
              initial_time=$(stat -c %Z "${real_path}")
              while true; do
                real_path=$(realpath ${MON_CONFIG})
                latest_time=$(stat -c %Z "${real_path}")

                if [[ "${latest_time}" != "${initial_time}" ]]; then
                  write_endpoints
                  initial_time=${latest_time}
                fi

                sleep 10
              done
            }

            # read the secret from an env var (for backward compatibility), or from the secret file
            ceph_secret=${ROOK_CEPH_SECRET}
            if [[ "$ceph_secret" == "" ]]; then
              ceph_secret=$(cat /var/lib/rook-ceph-mon/secret.keyring)
            fi

            # create the keyring file
            cat <<EOF > ${KEYRING_FILE}
            [${ROOK_CEPH_USERNAME}]
            key = ${ceph_secret}
            EOF

            # write the initial config file
            write_endpoints

            # continuously update the mon endpoints if they fail over
            watch_endpoints
          env:
          - name: ROOK_CEPH_USERNAME
            valueFrom:
              secretKeyRef:
                key: ceph-username
                name: rook-ceph-mon
          image: quay.io/ceph/ceph:v19.2.3
          imagePullPolicy: IfNotPresent
          name: rook-ceph-tools
          resources:
            limits:
              memory: 1Gi
            requests:
              cpu: 100m
              memory: 128Mi
          securityContext:
            capabilities:
              drop:
              - ALL
            runAsGroup: 2016
            runAsNonRoot: true
            runAsUser: 2016
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          tty: true
          volumeMounts:
          - mountPath: /etc/ceph
            name: ceph-config
          - mountPath: /etc/rook
            name: mon-endpoint-volume
          - mountPath: /var/lib/rook-ceph-mon
            name: ceph-admin-secret
        dnsPolicy: ClusterFirstWithHostNet
        hostNetwork: true
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: rook-ceph-default
        serviceAccountName: rook-ceph-default
        terminationGracePeriodSeconds: 30
        tolerations:
        - effect: NoExecute
          key: node.kubernetes.io/unreachable
          operator: Exists
          tolerationSeconds: 5
        volumes:
        - name: ceph-admin-secret
          secret:
            defaultMode: 420
            items:
            - key: ceph-secret
              path: secret.keyring
            optional: false
            secretName: rook-ceph-mon
        - configMap:
            defaultMode: 420
            items:
            - key: data
              path: mon-endpoints
            name: rook-ceph-mon-endpoints
          name: mon-endpoint-volume
        - emptyDir: {}
          name: ceph-config
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    terminatingReplicas: 0
kind: List
metadata:
  resourceVersion: ""
