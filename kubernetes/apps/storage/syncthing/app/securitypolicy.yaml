---
# yaml-language-server: $schema=https://kubernetes-schemas.nerdz.cloud/gateway.envoyproxy.io/securitypolicy_v1alpha1.json
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: SecurityPolicy
metadata:
  name: syncthing-ip-allow
  namespace: storage
spec:
  targetRefs:
    - group: gateway.networking.k8s.io
      kind: HTTPRoute
      name: syncthing-app
  authorization:
    defaultAction: Deny
    rules:
      - action: Allow
        principal:
          clientCIDRs:
            - 10.42.0.0/16
            - 172.20.20.0/20
